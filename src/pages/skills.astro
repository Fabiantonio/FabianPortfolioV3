---
import Layout from "../layouts/Layout.astro";
import { SKILLS } from "../lib/constants";
import "../assets/main.css";
---

<Layout title="Skills">
  <ssection
    class="mt-[1rem] md:mt-[8rem] 2xl:mt-[0rem] w-full h-auto mx-auto max-w-5xl flex flex-wrap justify-center gap-5 p-5 overflow-hidden"
  >
    {
      SKILLS.map((skills, index) => (
        <div
          class="card mb-[8rem]"
          data-aos-duration="1700"
          data-aos-delay="200"
          data-aos="fade"
        >
          <div class="  bg-zinc-100 dark:bg-[#1a1a1a] w-72 h-48 rounded-lg overflow-hidden dark:shadow-slate-50 transition-shadow duration-500">
            <div class="flex p-2 gap-1">
              <div class="">
                <span class="bg-blue-500 inline-block center w-3 h-3 rounded-full" />
              </div>
              <div class="circle">
                <span class="bg-purple-500 inline-block center w-3 h-3 rounded-full" />
              </div>
              <div class="circle">
                <span class="bg-pink-500 box inline-block center w-3 h-3 rounded-full" />
              </div>
            </div>

            <div class=" card__content flex flex-col justify-center items-center p-2 gap-5">
              <skills.icon class="size-16" />
              <div class="skill-box">
                <span class="title text-neutral-700 dark:text-neutral-300">
                  {skills.name}
                </span>

                <div class="skill-bar">
                  <span class={`${skills.class}`}>
                    <span class="tooltip">{skills.per}</span>
                  </span>
                </div>
              </div>
            </div>
          </div>
          <div class="blob" />
          <div class="fakeblob" />
        </div>
      ))
    }

    <!-- From Uiverse.io by Juanes200122 -->
  </ssection>
</Layout>

<script>
  document.addEventListener("astro:page-load", () => {
    const allCards = document.querySelectorAll(".card");

    window.addEventListener("mousemove", (ev) => {
      allCards.forEach((e) => {
        const blob = e.querySelector(".blob");
        const fblob = e.querySelector(".fakeblob");

        const rec = fblob.getBoundingClientRect();

        blob?.animate(
          [
            {
              transform: `translate(${ev.clientX - rec.left - rec.width / 2}px,${ev.clientY - rec.top - rec.height / 2}px)`,
            },
          ],
          {
            duration: 300,
            fill: "forwards",
          }
        );
      });
    });
  });
</script>

<script>
  import AOS from "aos";
  import "aos/dist/aos.css";
  document.addEventListener("astro:page-load", () => {
    AOS.init();
  });
</script>

<style>
  .fakeblob {
    display: hidden;
    position: absolute;
    z-index: -1;
    top: 0;
    left: 0;
    width: 200px;
    height: 200px;
    border-radius: 50%;
  }

  .blob {
    filter: blur(40px);
    position: absolute;
    z-index: -1; /* to keep it at below everything else */
    top: 0; /* to align it at top */
    left: 0; /* to align it at left */
    width: 250px;
    height: 250px;
    border-radius: 50%; /* to make it circular */
    background: rgba(0, 221, 255, 0.415);
    @apply dark:bg-[rgba(27,221,255,0.47)];
  }

  .card {
    background: rgb(128 128 128 / 0.2);
    padding: 3px;
    border-radius: 12px;
    position: relative;
    overflow: hidden;
  }

  .skill-box {
    width: 100%;
    margin: px 0;
  }

  .skill-box .title {
    display: block;
    font-size: 15px;
    font-weight: 600;
  }

  .skill-box .skill-bar {
    height: 8px;
    width: 100%;
    border-radius: 6px;
    margin-top: 6px;
    background: rgba(61, 61, 61, 0.669);
  }

  .skill-bar .skill-per {
    position: relative;
    display: block;
    height: 100%;

    border-radius: 6px;
    background: rgb(226, 226, 226);
    animation: progress 0.4s ease-in-out forwards;
    opacity: 0;
  }

  .skill-per.html {
    /*progreso de las diferentes lenguajes*/
    width: 90%;
    animation-delay: 0.1s;
  }

  .skill-per.css {
    /*progreso de las diferentes lenguajes*/
    width: 80%;
    animation-delay: 0.1s;
  }

  .skill-per.javascript {
    /*progreso de las diferentes lenguajes*/
    width: 70%;
    animation-delay: 0.1s;
  }

  .skill-per.Boostrap {
    /*progreso de las diferentes lenguajes*/
    width: 50%;
    animation-delay: 0.2s;
  }

  .skill-per.python {
    /*progreso de las diferentes lenguajes*/
    width: 50%;
    animation-delay: 0.1s;
  }

  .skill-per.django {
    /*progreso de las diferentes lenguajes*/
    width: 45%;
    animation-delay: 0.1s;
  }

  .skill-per.typescript {
    /*progreso de las diferentes lenguajes*/
    width: 50%;
    animation-delay: 0.1s;
  }

  .skill-per.angular {
    /*progreso de las diferentes lenguajes*/
    width: 60%;
    animation-delay: 0.1s;
  }

  .skill-per.ionic {
    /*progreso de las diferentes lenguajes*/
    width: 60%;
    animation-delay: 0.1s;
  }

  .skill-per.firebase {
    /*progreso de las diferentes lenguajes*/
    width: 60%;
    animation-delay: 0.1s;
  }

  .skill-per.boostrap {
    /*progreso de las diferentes lenguajes*/
    width: 50%;
    animation-delay: 0.1s;
  }

  @keyframes progress {
    0% {
      width: 0;
      opacity: 1;
    }

    100% {
      opacity: 1;
    }
  }

  .skill-per .tooltip {
    position: absolute;
    right: -14px;
    top: -28px;
    font-size: 9px;
    font-weight: 500;
    color: rgb(0, 0, 0);
    font-weight: bold;
    padding: 2px 6px;
    border-radius: 3px;
    background: rgb(226, 226, 226);
    z-index: 1;
  }

  .tooltip::before {
    content: "";
    position: absolute;
    left: 50%;
    bottom: -2px;
    height: 10px;
    width: 10px;
    z-index: -1;
    background-color: rgb(226, 226, 226);
    transform: translateX(-50%) rotate(45deg);
  }
</style>
